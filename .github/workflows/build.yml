name: CI
on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout sources
        uses: actions/checkout@v2
        with:
          persist-credentials: false
          path: 'commons-ui'

      - name: Build
        run: |
          cd $GITHUB_WORKSPACE/commons-ui
          npm install
          npm run build

      - name: Broadcast update event
        uses: gridsuite/broadcast-event@master
        with:
          token: ${{ secrets.REPO_ACCESS_TOKEN }}
          event-type: commons-ui-updated
